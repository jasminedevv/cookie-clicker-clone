
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cookies</title>
  </head>
  <body>
    <h1 id='cookie-counter'>1</h1>
    <button id='cookie-clicker' type="button" name="button">Bake Cookies</button>
    <hr>
    <h2>Shop</h2>
    <p>Click Power</p>
    <p>Produces <span id="click-power-multiple">1</span> cookie(s) per click.</p>
    <button id="buy-click-power" type="button" name="button">Buy for <span id="click-power-price">50</span> cookies</button>
    <p>Level: <span id="click-power-level">1</span></p>
  </body>

  <script>
  // counter and main button variables
  let cookieCount = 500;
  let clickPower = 1;

  let clickPowerPriceAmount = 50;
  let clickPowerLevelNumber = 1;

  console.log("initial cookie count is " + cookieCount);

  let cookieCounter = document.getElementById('cookie-counter');
  let cookieClicker = document.getElementById('cookie-clicker');

  let refreshCookieCount = function() {
    cookieCounter.innerHTML = cookieCount;
    console.log("cookie count is now " + cookieCount);
  }

  // shop variables
  let buyClickPowerElement = document.getElementById('buy-click-power');
  let clickPowerPriceElement = document.getElementById('click-power-price');
  let clickPowerLevelElement = document.getElementById('click-power-level');
  let clickPowerMultiple = document.getElementById('click-power-multiple');

  let refreshPowerClick = function() {
    clickPowerLevelElement.innerHTML = clickPowerLevelNumber //???;
    clickPowerPriceElement.innerHTML = clickPowerPriceAmount;
    clickPowerMultiple.innerHTML = clickPower;
    console.log("power level set to " + clickPower)
  }

  //event listeners
  // increase cookie count by clickPower when button pressed
  cookieClicker.addEventListener("click", function() {
    cookieCount = cookieCount + clickPowerLevelNumber;
    refreshCookieCount();
    // console.log("cookie count is now " + cookieCount);
  });

  buyClickPowerElement.addEventListener("click", function() {
    console.log("well at least the event listener works");
    if (cookieCount >= clickPowerPriceAmount) {
      console.log("item successfully bought");
      cookieCount -= clickPowerPriceAmount;
      clickPowerLevelNumber += 1;
      clickPowerPriceAmount = Math.floor(clickPowerPriceAmount * 1.3);
      refreshPowerClick();
      refreshCookieCount();
    } else {
        console.log("you don't have enough cookies!");
      }
    });

    refreshCookieCount();

  </script>
</html>
